<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue手把手带你撸项目之瀑布流布局的5种实现方式 | 六小登登 | 个人博客</title>
    <meta name="description" content="一个爱写作的技术人">
    <meta name="baidu-site-verification" content="98hqserh61">
  <meta name="google-site-verification" content="R6VvQeeR0rKnNfAn8nH1HOU5hyK5KAVFHXAH8KivxGQ">
  <link rel="icon" href="/favicon.png">
    
    <link rel="preload" href="/assets/css/0.styles.e091e816.css" as="style"><link rel="preload" href="/assets/js/app.f4e7215e.js" as="script"><link rel="preload" href="/assets/js/6.7295f252.js" as="script"><link rel="preload" href="/assets/js/36.8ccc507b.js" as="script"><link rel="prefetch" href="/assets/js/1.9a4105ea.js"><link rel="prefetch" href="/assets/js/10.fe7b5075.js"><link rel="prefetch" href="/assets/js/100.4529bc67.js"><link rel="prefetch" href="/assets/js/101.5c853def.js"><link rel="prefetch" href="/assets/js/102.c71d3110.js"><link rel="prefetch" href="/assets/js/103.759cd44f.js"><link rel="prefetch" href="/assets/js/104.4b174d01.js"><link rel="prefetch" href="/assets/js/105.faae6855.js"><link rel="prefetch" href="/assets/js/106.d0811dd9.js"><link rel="prefetch" href="/assets/js/107.083a61b4.js"><link rel="prefetch" href="/assets/js/108.e153da10.js"><link rel="prefetch" href="/assets/js/109.600ca410.js"><link rel="prefetch" href="/assets/js/11.2f0ce85c.js"><link rel="prefetch" href="/assets/js/110.d089c98a.js"><link rel="prefetch" href="/assets/js/111.11381a3b.js"><link rel="prefetch" href="/assets/js/112.2643433e.js"><link rel="prefetch" href="/assets/js/113.60a6b17f.js"><link rel="prefetch" href="/assets/js/114.6818261d.js"><link rel="prefetch" href="/assets/js/115.ffb84184.js"><link rel="prefetch" href="/assets/js/116.68f33f59.js"><link rel="prefetch" href="/assets/js/117.abd51682.js"><link rel="prefetch" href="/assets/js/118.f39fc97f.js"><link rel="prefetch" href="/assets/js/119.f902e0d8.js"><link rel="prefetch" href="/assets/js/12.8209f90e.js"><link rel="prefetch" href="/assets/js/120.67f5417c.js"><link rel="prefetch" href="/assets/js/121.3e28114c.js"><link rel="prefetch" href="/assets/js/122.f025b1bf.js"><link rel="prefetch" href="/assets/js/123.ad439bb5.js"><link rel="prefetch" href="/assets/js/124.339301a3.js"><link rel="prefetch" href="/assets/js/125.448ef6ef.js"><link rel="prefetch" href="/assets/js/13.1eed296c.js"><link rel="prefetch" href="/assets/js/14.8b9b7f10.js"><link rel="prefetch" href="/assets/js/15.dd187ddc.js"><link rel="prefetch" href="/assets/js/16.4bf5485b.js"><link rel="prefetch" href="/assets/js/17.327a0014.js"><link rel="prefetch" href="/assets/js/18.efb2930c.js"><link rel="prefetch" href="/assets/js/19.d85be20c.js"><link rel="prefetch" href="/assets/js/2.0e0fec4e.js"><link rel="prefetch" href="/assets/js/20.e7982505.js"><link rel="prefetch" href="/assets/js/21.ece80c79.js"><link rel="prefetch" href="/assets/js/22.878212c4.js"><link rel="prefetch" href="/assets/js/23.09f3d5bb.js"><link rel="prefetch" href="/assets/js/24.8b0ded6a.js"><link rel="prefetch" href="/assets/js/25.1c2bc414.js"><link rel="prefetch" href="/assets/js/26.afbc5ffc.js"><link rel="prefetch" href="/assets/js/27.d9f17baf.js"><link rel="prefetch" href="/assets/js/28.c8a147ce.js"><link rel="prefetch" href="/assets/js/29.26fef0a7.js"><link rel="prefetch" href="/assets/js/3.b569db4c.js"><link rel="prefetch" href="/assets/js/30.0cf982ef.js"><link rel="prefetch" href="/assets/js/31.2650cf9d.js"><link rel="prefetch" href="/assets/js/32.426bce67.js"><link rel="prefetch" href="/assets/js/33.6c6b8f0c.js"><link rel="prefetch" href="/assets/js/34.43416072.js"><link rel="prefetch" href="/assets/js/35.d6af82e6.js"><link rel="prefetch" href="/assets/js/37.75649a25.js"><link rel="prefetch" href="/assets/js/38.c29d64b0.js"><link rel="prefetch" href="/assets/js/39.af9b7740.js"><link rel="prefetch" href="/assets/js/40.2d778bcb.js"><link rel="prefetch" href="/assets/js/41.5c11a35a.js"><link rel="prefetch" href="/assets/js/42.3ee551a0.js"><link rel="prefetch" href="/assets/js/43.d866b4c1.js"><link rel="prefetch" href="/assets/js/44.c87bb529.js"><link rel="prefetch" href="/assets/js/45.76f2fc66.js"><link rel="prefetch" href="/assets/js/46.77bb0dc8.js"><link rel="prefetch" href="/assets/js/47.c4a8e9fe.js"><link rel="prefetch" href="/assets/js/48.9cf1b148.js"><link rel="prefetch" href="/assets/js/49.c4673552.js"><link rel="prefetch" href="/assets/js/50.257c3638.js"><link rel="prefetch" href="/assets/js/51.b4d209a2.js"><link rel="prefetch" href="/assets/js/52.88d08c8c.js"><link rel="prefetch" href="/assets/js/53.96a8262c.js"><link rel="prefetch" href="/assets/js/54.e2298d32.js"><link rel="prefetch" href="/assets/js/55.ac367ee4.js"><link rel="prefetch" href="/assets/js/56.427d64a5.js"><link rel="prefetch" href="/assets/js/57.e7777299.js"><link rel="prefetch" href="/assets/js/58.e7ed125d.js"><link rel="prefetch" href="/assets/js/59.9bdef9dd.js"><link rel="prefetch" href="/assets/js/60.2ac5be63.js"><link rel="prefetch" href="/assets/js/61.0fa249c7.js"><link rel="prefetch" href="/assets/js/62.e5a16f60.js"><link rel="prefetch" href="/assets/js/63.5fad2677.js"><link rel="prefetch" href="/assets/js/64.19a95a28.js"><link rel="prefetch" href="/assets/js/65.ce2a1cd2.js"><link rel="prefetch" href="/assets/js/66.a7f3d9ae.js"><link rel="prefetch" href="/assets/js/67.d13e6738.js"><link rel="prefetch" href="/assets/js/68.de005e37.js"><link rel="prefetch" href="/assets/js/69.4a7ce968.js"><link rel="prefetch" href="/assets/js/7.d568f4d6.js"><link rel="prefetch" href="/assets/js/70.38cd20f3.js"><link rel="prefetch" href="/assets/js/71.a580a147.js"><link rel="prefetch" href="/assets/js/72.2875c20a.js"><link rel="prefetch" href="/assets/js/73.64cd0de7.js"><link rel="prefetch" href="/assets/js/74.31138ee1.js"><link rel="prefetch" href="/assets/js/75.5d661a83.js"><link rel="prefetch" href="/assets/js/76.2c925533.js"><link rel="prefetch" href="/assets/js/77.268d5389.js"><link rel="prefetch" href="/assets/js/78.9f7fff4b.js"><link rel="prefetch" href="/assets/js/79.4af067b7.js"><link rel="prefetch" href="/assets/js/8.3c48ae9c.js"><link rel="prefetch" href="/assets/js/80.23a4baf0.js"><link rel="prefetch" href="/assets/js/81.485b7209.js"><link rel="prefetch" href="/assets/js/82.04abac67.js"><link rel="prefetch" href="/assets/js/83.c14c8de4.js"><link rel="prefetch" href="/assets/js/84.145810d6.js"><link rel="prefetch" href="/assets/js/85.7fe879f5.js"><link rel="prefetch" href="/assets/js/86.17609648.js"><link rel="prefetch" href="/assets/js/87.add2061f.js"><link rel="prefetch" href="/assets/js/88.99171355.js"><link rel="prefetch" href="/assets/js/89.01ccac1c.js"><link rel="prefetch" href="/assets/js/9.f42dbcfc.js"><link rel="prefetch" href="/assets/js/90.32a59be8.js"><link rel="prefetch" href="/assets/js/91.5d5bea86.js"><link rel="prefetch" href="/assets/js/92.39a342bc.js"><link rel="prefetch" href="/assets/js/93.537b5022.js"><link rel="prefetch" href="/assets/js/94.d5732914.js"><link rel="prefetch" href="/assets/js/95.26e65223.js"><link rel="prefetch" href="/assets/js/96.1a32dc2c.js"><link rel="prefetch" href="/assets/js/97.bb66f3f1.js"><link rel="prefetch" href="/assets/js/98.3155e09f.js"><link rel="prefetch" href="/assets/js/99.e053247a.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.980c108b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e091e816.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">六小登登 | 个人博客</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/python/why-learning-python/" class="nav-link">Python</a></div><div class="nav-item"><a href="/javascript/excution-content/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/css/css-content/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/css-tip/auto-rect-scale/" class="nav-link">无限CSS</a></div><div class="nav-item"><a href="/vue/vue-keep-alive/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/handle/image-layout/" class="nav-link">手把手系列</a></div><div class="nav-item"><a href="/talk/完美主义/" class="nav-link">认知思维</a></div><div class="nav-item"><a href="https://github.com/liuxiaodeng/liuxiaodeng.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/python/why-learning-python/" class="nav-link">Python</a></div><div class="nav-item"><a href="/javascript/excution-content/" class="nav-link">JavaScript</a></div><div class="nav-item"><a href="/css/css-content/" class="nav-link">CSS</a></div><div class="nav-item"><a href="/css-tip/auto-rect-scale/" class="nav-link">无限CSS</a></div><div class="nav-item"><a href="/vue/vue-keep-alive/" class="nav-link">Vue</a></div><div class="nav-item"><a href="/handle/image-layout/" class="nav-link">手把手系列</a></div><div class="nav-item"><a href="/talk/完美主义/" class="nav-link">认知思维</a></div><div class="nav-item"><a href="https://github.com/liuxiaodeng/liuxiaodeng.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>手把手系列</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/handle/image-layout.html" class="active sidebar-link">Vue手把手带你撸项目之瀑布流布局的5种实现方式</a></li><li><a href="/handle/vue-dymic-bread.html" class="sidebar-link">Vue手把手带你撸项目系列之动态面包屑</a></li></ul></div></li></ul> </div> <div class="page"> <div class="content default"><h2 id="vue手把手带你撸项目之瀑布流布局的5种实现方式"><a href="#vue手把手带你撸项目之瀑布流布局的5种实现方式" aria-hidden="true" class="header-anchor">#</a> Vue手把手带你撸项目之瀑布流布局的5种实现方式</h2> <p>最近项目中需要处理与图片相关的布局，不得不说图片这玩意真想要得到完美的展示效果还真是要费些力气。因为图片的尺寸或者比例各不相同。所以想要不同尺寸的图片有好的显示效果，你就需要找到适合的方式。</p> <p>而且图片往往是不可或缺元素。毕竟一图胜千言，有时候图片能给带来非常好的效果。</p> <p>比如我们每天都会使用的表情包，它往往能够表达出我们无法用文字描述的信息，还比如我们经常在公众号里看到的漫画虽然短短几个字，但是却能够让我们看的不亦乐乎。</p> <p>当然如果我们做图片网站的，那图片的处理就是绕不开的话题了。因对图片的处理经验不多，所以就边学边用。今天就把最近学习与图片相关的知识整理出来。</p> <p><strong>比如单个图片如何更好的展示，瀑布流布局都有哪些你不知道的实现方式。</strong></p> <p>接下来我们就直接进入正题，我们先从单张图片的展示说起。</p> <h3 id="设置宽或高-100"><a href="#设置宽或高-100" aria-hidden="true" class="header-anchor">#</a> 设置宽或高 100%</h3> <p>因为图片其本身的独特性：</p> <ol><li>不设置宽高的情况下会按原有的尺寸显示在网页中。即有多大，显示多大。</li> <li>在非等比缩放的情况下会被拉伸变形。</li> <li>设置宽度或者高度时，会保持原宽高比进行缩放。</li></ol> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-1.png" alt=""></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.box1</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.box2</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid red<span class="token selector">;
  img</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>显然当我们采用 1、2 种方式的时候破坏性很强，无法应用到实际的项目中去。</p> <p>所以往往我们会在项目中使用第 3 种方式，即设置高度或者宽度。它会保持原有比例进行缩放。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-2.png" alt=""></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.img1</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.img2</span> <span class="token punctuation">{</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>但是问题又来了，图片要么超出容器，要么就会留有空白，除非容器的宽高比恰好等于图片的宽高比时，才会完全贴合。</p> <p>对于超出容器的图片我们可以使用 <code>overflow: hidden</code> 把超出部分隐藏。图片得到了好的展示效果。但相应的我们也损失了图片的一部分可视区域。</p> <p>所以这个时候就需要你根据需求进行取舍了，到底是选择隐藏图片的一部分，还是留有空白。有的小伙伴会说，我们产品说了，图片变形没问题，你就给我充满容器就行了。好吧....</p> <p>即使如此，你也要把这篇文章好好读一读，因为需求是千变万化的，保不齐哪一天就需要了。</p> <p>又有小伙伴说，这 2 种都不符合我们的产品需求怎么办，还有其他的方式吗？答案是必须的，一起来看。</p> <h3 id="object-fit"><a href="#object-fit" aria-hidden="true" class="header-anchor">#</a> object-fit</h3> <p>CSS3 的 object-fit 属性是用来指定「可替换元素」的内容是如何适应到容器中的。它的值有 5 种。分别为：<code>fill | contain | cover | none | scale-down</code>。先看下效果在来一一解释它们到底都是什么意思。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-3.png" alt=""></p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://picsum.photos/id/1027/200/300<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 150px<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 2px solid red<span class="token selector">;
  img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">object-fit</span><span class="token punctuation">:</span> contain<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><p>看到上面的显示效果，理解起来并不难了。</p> <ul><li>fill：会充满整个容器，不考虑宽高比，所以会被拉伸变形。</li> <li>contain：会缩放到容器内，保持宽高比。</li> <li>cover：会保持比例进行缩放，内容的尺寸一定会大于等于容器，然后进行裁剪。</li> <li>none：保持图片的原始尺寸。</li></ul> <p>而 <code>scale-down</code> 有两种表现方式所以我们单独来看。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-4.png" alt=""></p> <ul><li>scale-down：会在 none 或 contain 中选择一个，原则是：当容器小时，它的表现和 contain 一样；当图片小时，它的表现和 none 一样。即谁小选择谁。</li></ul> <p>到这里不知道有没有小伙伴和我一样，在看到图片的不同表现时，我特意去浏览器查看了下 <code>&lt;img&gt;</code>的真实尺寸，发现依然是 <code>width: 100%;height: 100%;</code> 是充满整个容器的。</p> <p>但为什么内容显示却有不同的效果呢，这让我产生了疑惑。本着发现探索的精神，就去寻找答案了。</p> <p>W3c 是这么描述的：<code>&lt;img&gt;</code> 标签创建的是被引用图像的占位空间。</p> <p>而张鑫旭大大在<a href="https://www.zhangxinxu.com/wordpress/2015/03/css3-object-position-object-fit/" target="_blank" rel="noopener noreferrer">半深入理解CSS3 object-position/object-fit属性<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>一文中也指出：</p> <p><code>&lt;img&gt;</code>元素其实与内容是相互独立的。<code>&lt;img&gt;</code>相当于一个外壳包裹着内容。你控制的只是<code>&lt;img&gt;</code> 元素的尺寸。而内容的尺寸则由 <code>object-fit</code> 属性控制。</p> <p>综上索述，<code>&lt;img&gt;</code> 是一个空间占位符，并不控制内容。原来如此。感觉自己又进步了。每一次的探索，都会发现新的东西，这种感觉很奇妙。特别是还把它整理出文章，提供大家学习，感觉牛逼哄哄带闪电。</p> <p>知道了这些之后我们操控图片时更加的得心应手一些。那会了这些就结束了吗？不不不，这才是刚刚开始，精彩的还在后面。后面的布局才更加精彩。</p> <h3 id="多图片的布局"><a href="#多图片的布局" aria-hidden="true" class="header-anchor">#</a> 多图片的布局</h3> <p>上面一直在说的都单张图片的显示。只要我们把图片用合适的方式放进容器即可。如果是图片列表呢？或者专门展示图片的网站会有大量的图片而且尺寸和比例千奇百怪，各不相同。</p> <p>假设要想实现一个图片画廊效果，首先我们给图片一个 <code>float: left</code>，但是由于图片的尺寸不一样，导致每个图片的高度不同，下一行的图片就会卡住，导致布局错乱。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-5.png" alt=""></p> <p>此时你不得不给容器设置高度，让图片能够底部对齐，但在文章一开始我们也提到了，这时候图片要么超出容器的高度，要么留有空白。</p> <p>那如果使用 <code>object-fit</code> 属性按照业务需求去控制内容，貌似可以完成任务。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-6.png" alt=""></p> <p>我们把值设为 contain，布局是没有问题了，但是其实很不美观。如果设为 cover，如果图片过大很多内容都会丢失看不到。 怎么办？有什么解决办法？这时候就是瀑布流布局的优势了。</p> <p>瀑布流布局即不会出现错乱现象，而且会最大限度显示图片的内容。所以是众多图片网站选择的布局方式。</p> <p>而瀑布流布局目前有两种形式：一是等宽型，二是等高型。我们先来说说等宽型。</p> <h3 id="等宽瀑布流"><a href="#等宽瀑布流" aria-hidden="true" class="header-anchor">#</a> 等宽瀑布流</h3> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-7.png" alt=""></p> <p>看到上面你实现的思路是什么？可以思考几秒，接下来一起来看这些实现方式中有没有和你一思路一样的。</p> <h4 id="思路1-js-计算列数"><a href="#思路1-js-计算列数" aria-hidden="true" class="header-anchor">#</a> 思路1. JS 计算列数</h4> <p>关键思路：</p> <ul><li>首先设置列宽度，然后计算能够展示的列数。</li> <li>向每一列中添加图片。</li></ul> <p>关键代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
     <span class="token comment">//计算图片列数</span>
    <span class="token function">getColNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> clientWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>waterfall<span class="token punctuation">.</span>clientWidth
      <span class="token keyword">this</span><span class="token punctuation">.</span>colNumbers <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//读取图片</span>
    <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getColNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">17</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> colIndex <span class="token operator">=</span> i <span class="token operator">%</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colNumbers
        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`@/assets/images/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg`</span></span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">[</span>colIndex<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">[</span>colIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">,</span> colIndex<span class="token punctuation">,</span> <span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>优势</strong>：思路清晰简单，不需要做过多的计算，只要计算需要显示的列数然后添加图片即可。</p> <p><strong>劣势</strong>：每列的末尾可能不够友好，可能出现有些列会很长，有些又会很短。</p> <h4 id="思路2-利用绝对定位"><a href="#思路2-利用绝对定位" aria-hidden="true" class="header-anchor">#</a> 思路2. 利用绝对定位</h4> <p>关键思路：</p> <ul><li>首先设置列宽度，然后计算能够展示的列数。</li> <li>把图片设置为绝对定位，然后计算出每个图片的top，left值。</li> <li>先把第一行图片排好，top 为 0，left 为 列的索引*列宽。</li> <li>从第二行开始，每张图片都放到最短的一列下面。然后增加此列高度，此时列的高度发生变化，下张图片又会寻找其他最短的列。以此持续计算下去。</li></ul> <p>关键代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">//计算图片列数</span>
    <span class="token function">getColNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> clientWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>waterfall<span class="token punctuation">.</span>clientWidth
      <span class="token keyword">this</span><span class="token punctuation">.</span>colNumbers <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>clientWidth <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//读取图片</span>
    <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getColNumbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">17</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`@/assets/images/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg`</span></span><span class="token punctuation">)</span>
        image<span class="token punctuation">.</span>src <span class="token operator">=</span> url
        image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            index<span class="token punctuation">:</span> i<span class="token punctuation">,</span>
            url<span class="token punctuation">:</span> url<span class="token punctuation">,</span>
            ratio<span class="token punctuation">:</span> image<span class="token punctuation">.</span>width <span class="token operator">/</span> image<span class="token punctuation">.</span>height
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">render</span><span class="token punctuation">(</span>imgInfo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> colIndex <span class="token operator">=</span> imgInfo<span class="token punctuation">.</span>index <span class="token operator">%</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colNumbers
      imgInfo<span class="token punctuation">.</span>left <span class="token operator">=</span> colIndex <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth
      <span class="token comment">//首行 top为 0，记录每列的高度</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>imgInfo<span class="token punctuation">.</span>index <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colNumbers<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        imgInfo<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>colHeight<span class="token punctuation">[</span>colIndex<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth <span class="token operator">/</span> imgInfo<span class="token punctuation">.</span>ratio
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">//获取高度的最小值</span>
        <span class="token keyword">let</span> minHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span>min<span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colHeight<span class="token punctuation">)</span>
        <span class="token keyword">let</span> minIndex <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colHeight<span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span>minHeight<span class="token punctuation">)</span>
        <span class="token comment">//此图片的 top 为上面图片的高度，left 相等</span>
        imgInfo<span class="token punctuation">.</span>top <span class="token operator">=</span> minHeight
        imgInfo<span class="token punctuation">.</span>left <span class="token operator">=</span> minIndex <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth
        <span class="token comment">//把高度加上去</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>colHeight<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">+=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>colWidth <span class="token operator">/</span> imgInfo<span class="token punctuation">.</span>ratio
      <span class="token punctuation">}</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>imgInfo<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>优势</strong>：因为每次追加的图片都是最短列，所以末尾的展示会比思路 1 中要友好很多。</p> <p><strong>劣势</strong>：没渲染一张都会计算一次 top，left 值。而且图片的顺序是打乱的。</p> <h4 id="思路3-css3-column-属性"><a href="#思路3-css3-column-属性" aria-hidden="true" class="header-anchor">#</a> 思路3. CSS3 column 属性</h4> <p>关键思路：</p> <ul><li>column-count：指定列数</li> <li>column-gap: 设置列之间的间距</li></ul> <p>关键代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>waterfall-width-column<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img in imgList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.waterfall-width-column</span> <span class="token punctuation">{</span>
  <span class="token property">column-count</span><span class="token punctuation">:</span> 3<span class="token punctuation">;</span>
  <span class="token property">column-gap</span><span class="token punctuation">:</span> 10px<span class="token selector">;
  .image-box</span> <span class="token punctuation">{</span>
    <span class="token selector">img</span> <span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
      <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>优势</strong>：更加简单，不用额外计算，直接使用CSS渲染高效。</p> <p><strong>劣势</strong>：图片的顺序是从上向下排列的，这个要看业务需求允不允许了。另外列数固定。</p> <p>不过你可以尝试通过媒体查询设置不同列数</p> <div class="language-vue extra-class"><pre class="language-vue"><code>@media (min-width: 768px) {
  .waterfall-width-column {
    column-count: 3;
  }
}
@media (min-width: 992px) {
  .waterfall-width-column {
    column-count: 4;
  }
}
@media (min-width: 1200px) {
  .waterfall-width-column {
    column-count: 6;
  }
}
</code></pre></div><h3 id="等高瀑布流"><a href="#等高瀑布流" aria-hidden="true" class="header-anchor">#</a> 等高瀑布流</h3> <p>说完了等宽型接下来我们来说说等高型。</p> <p><img src="https://blog-1257601889.cos.ap-shanghai.myqcloud.com/js/image-layout-8.png" alt=""></p> <h4 id="思路1-js计算缩放"><a href="#思路1-js计算缩放" aria-hidden="true" class="header-anchor">#</a> 思路1. JS计算缩放</h4> <ul><li>首先给定一个基准高度</li> <li>图片获取基准高度下的宽度，然后计算每一行能够放入多少张</li> <li>此时每一行图片肯定会小于容器宽度，然后这一行进行缩放到容器大小。在重新计算放大后的高度。</li></ul> <p>关键代码：</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      baseHeight<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token comment">//图片的基础计算高度</span>
      imgList<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">//用二维数据保存每一行数据</span>
      rowWidth<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token comment">//每行的图片宽度</span>
      rowCount<span class="token punctuation">:</span> <span class="token number">0</span> <span class="token comment">//每行的索引</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">loadImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">17</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">let</span> url <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`@/assets/images/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>i<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.jpg`</span></span><span class="token punctuation">)</span>
        image<span class="token punctuation">.</span>src <span class="token operator">=</span> url
        image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">compare</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
            url<span class="token punctuation">:</span> url<span class="token punctuation">,</span>
            width<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseHeight <span class="token operator">*</span> <span class="token punctuation">(</span>image<span class="token punctuation">.</span>width <span class="token operator">/</span> image<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">,</span>
            height<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseHeight
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">//缩放后的总图片宽度与屏幕宽度比较</span>
    <span class="token function">compare</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">//容器宽度</span>
      <span class="token keyword">let</span> clientWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>waterfall<span class="token punctuation">.</span>clientWidth
      <span class="token comment">//计算每行宽度</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth <span class="token operator">+=</span> image<span class="token punctuation">.</span>width
      <span class="token comment">//如果宽度大于容器宽度，去掉多余的宽度，整体进行缩放适应容器让右边对齐</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth <span class="token operator">&gt;</span> clientWidth<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//减去每个css padding边距</span>
        clientWidth <span class="token operator">=</span> clientWidth <span class="token operator">-</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>rowCount<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">*</span> <span class="token number">10</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth <span class="token operator">-</span> image<span class="token punctuation">.</span>width
        <span class="token comment">//把高度调整为放大后的</span>
        <span class="token keyword">let</span> growAfterHeight <span class="token operator">=</span> <span class="token punctuation">(</span>clientWidth <span class="token operator">*</span> <span class="token keyword">this</span><span class="token punctuation">.</span>baseHeight<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>rowCount<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
          item<span class="token punctuation">.</span>height <span class="token operator">=</span> growAfterHeight
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">//把多余图片放入到下一行</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>rowWidth <span class="token operator">=</span> image<span class="token punctuation">.</span>width
        <span class="token keyword">this</span><span class="token punctuation">.</span>rowCount<span class="token operator">++</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>$<span class="token keyword">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>rowCount<span class="token punctuation">,</span> <span class="token punctuation">[</span>image<span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>imgList<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>rowCount<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>优势</strong>：图片的内容得到全部展示，不会被隐藏。</p> <p><strong>劣势</strong>：需要反复计算以及缩放。</p> <h4 id="思路2-flex布局"><a href="#思路2-flex布局" aria-hidden="true" class="header-anchor">#</a> 思路2. Flex布局</h4> <ul><li>首先给图片一个固定高度，然后利用flex-grow的比例分配的特性</li> <li>给图片设定object-fit属性让其保持比例充满容器</li></ul> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>waterfall-height-css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>image-box<span class="token punctuation">&quot;</span></span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img in imgList<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img.url<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>img.url<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.waterfall-height-css</span> <span class="token punctuation">{</span>
  <span class="token property">display</span><span class="token punctuation">:</span> flex<span class="token punctuation">;</span>
  <span class="token property">flex-wrap</span><span class="token punctuation">:</span> wrap<span class="token selector">;
  .image-box</span> <span class="token punctuation">{</span>
    <span class="token property">flex-grow</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">min-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
    <span class="token property">object-fit</span><span class="token punctuation">:</span> cover<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>此时你会发现，每一行的图片都得到了很好的显示效果。但是唯独最后一行会出现一个小小的问题。</p> <p>想象一下，假如最后一行只有一张图片的话，他会被缩放到充满一行，导致图片只会显示非常小的一部分内容。</p> <p>所以，我们最后一行的图片不进行缩放处理即可。只需要添加以下css属性即可。</p> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>scss<span class="token punctuation">&quot;</span></span> <span class="token attr-name">scoped</span><span class="token punctuation">&gt;</span></span><span class="token style language-css">
<span class="token selector">.waterfall-height-css</span> <span class="token punctuation">{</span>
  <span class="token selector">&amp;:after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>
    <span class="token property">flex-grow</span><span class="token punctuation">:</span> 99999<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>因为<code>flex-grow: 99999</code>的值非常大，所以会把最后一行的剩余空间几乎全部占用，导致图片分配不了，只会按照原尺寸显示，就不会缩放占满一行啦。</p> <p><strong>优势</strong>：css 设置简单，渲染高效。</p> <p><strong>劣势</strong>：会损失图片的一部分可见区域。</p> <p>到此，我们介绍了图片的显示特性以及如何利用 <code>object-fit</code> 进行内容的控制。</p> <p>对于多图片的布局，要想比较合理的显示图片，瀑布流布局是非常好的选择，当然如果业务需求对图片的展示友好度及美观度不做要求，你大可利用 <code>object-fit</code> 控制内容即可。</p> <p>但是我认为瀑布流布局也是我们应该掌握的内容之一，即便此时用不到，也可以先把文章收藏起来，以备不时之需，文中采用了多种方式的实现，你可以选择一种最贴合你需求的方式。</p> <p>当然，案例中其实还有很多细节没有处理，比如浏览器窗口发上变化时重新加载图片会发生闪动该如何优化体验？小伙伴们不妨自己去尝试进行优化。动手实践是掌握技能的重要手段。</p> <p>文中所有案例的代码地址：<a href="https://github.com/liuxiaodeng/vue-admin-pro" target="_blank" rel="noopener noreferrer">gitHub地址<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">2019年7月21日星期日凌晨2点12分</span></div></div> <div class="profile-info"><p>我是：六小登登，一名爱写作的技术人</p> <p>关注公众号：六小登登，后台回复「1024」即可免费获取惊喜福利</p> <p>后台回复「加群」群里每天都会全网搜罗好文章给你</p> <p>扫码即可关注</p> <img width="250px" src="/assets/img/small-solgan.80d7136e.png" alt="公众号：六小登登"></div> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/handle/vue-dymic-bread.html">Vue手把手带你撸项目系列之动态面包屑</a>→
      </span></p></div> </div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f4e7215e.js" defer></script><script src="/assets/js/6.7295f252.js" defer></script><script src="/assets/js/36.8ccc507b.js" defer></script>
  </body>
</html>
